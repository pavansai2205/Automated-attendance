{
  "entities": {
    "User": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "User",
      "type": "object",
      "description": "Represents a user of the AttendX system.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the User entity."
        },
        "firstName": {
          "type": "string",
          "description": "The first name of the user."
        },
        "lastName": {
          "type": "string",
          "description": "The last name of the user."
        },
        "email": {
          "type": "string",
          "description": "The email address of the user.",
          "format": "email"
        },
        "roleId": {
          "type": "string",
          "description": "Reference to Role. (Relationship: Role 1:N User)"
        },
        "faceTemplate": {
          "type": "string",
          "description": "A base64 encoded data URI of the user's registered face for recognition."
        },
        "phoneNumber": {
          "type": "string",
          "description": "The phone number of the student."
        },
        "address": {
          "type": "string",
          "description": "The home address of the student."
        },
        "parentName": {
          "type": "string",
          "description": "The name of the student's parent or guardian."
        },
        "parentPhoneNumber": {
          "type": "string",
          "description": "The phone number of the student's parent or guardian."
        }
      },
      "required": [
        "id",
        "firstName",
        "lastName",
        "email",
        "roleId"
      ]
    },
    "Role": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Role",
      "type": "object",
      "description": "Represents a role within the AttendX system (e.g., student, faculty, admin).",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Role entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the role (e.g., student, faculty, admin)."
        },
        "permissions": {
          "type": "array",
          "description": "A list of permissions granted to this role",
          "items": {
            "type": "string"
          }
        }
      },
      "required": [
        "id",
        "name",
        "permissions"
      ]
    },
    "Permission": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Permission",
      "type": "object",
      "description": "Represents a permission within the AttendX system",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Permission entity."
        },
        "name": {
          "type": "string",
          "description": "Name of the permission."
        }
      },
      "required": [
        "id",
        "name"
      ]
    },
    "AttendanceRecord": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "AttendanceRecord",
      "type": "object",
      "description": "Represents a single attendance record for a student in a specific class session.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the AttendanceRecord entity."
        },
        "studentId": {
          "type": "string",
          "description": "Reference to User (Student). (Relationship: User 1:N AttendanceRecord)"
        },
        "classSessionId": {
          "type": "string",
          "description": "Reference to ClassSession. (Relationship: ClassSession 1:N AttendanceRecord)"
        },
        "timestamp": {
          "type": "string",
          "description": "The date and time the attendance was recorded.",
          "format": "date-time"
        },
        "status": {
          "type": "string",
          "description": "The attendance status (e.g., present, absent, late)."
        }
      },
      "required": [
        "studentId",
        "classSessionId",
        "timestamp",
        "status"
      ]
    },
    "ClassSession": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "ClassSession",
      "type": "object",
      "description": "Represents a single instance of a class meeting.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the ClassSession entity."
        },
        "courseId": {
          "type": "string",
          "description": "Reference to Course. (Relationship: Course 1:N ClassSession)"
        },
        "startTime": {
          "type": "string",
          "description": "The start date and time of the class session.",
          "format": "date-time"
        },
        "endTime": {
          "type": "string",
          "description": "The end date and time of the class session.",
          "format": "date-time"
        }
      },
      "required": [
        "id",
        "courseId",
        "startTime",
        "endTime"
      ]
    },
    "Course": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Course",
      "type": "object",
      "description": "Represents a course offered by the college.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Course entity."
        },
        "name": {
          "type": "string",
          "description": "The name of the course."
        },
        "description": {
          "type": "string",
          "description": "A description of the course."
        },
        "instructorId": {
          "type": "string",
          "description": "Reference to User (Instructor). (Relationship: User 1:N Course)"
        }
      },
      "required": [
        "id",
        "name",
        "description",
        "instructorId"
      ]
    },
    "Mark": {
      "$schema": "http://json-schema.org/draft-07/schema#",
      "title": "Mark",
      "type": "object",
      "description": "Represents a mark or grade for a student in a course.",
      "properties": {
        "id": {
          "type": "string",
          "description": "Unique identifier for the Mark entity."
        },
        "studentId": {
          "type": "string",
          "description": "Reference to User (Student)."
        },
        "courseId": {
          "type": "string",
          "description": "Reference to Course."
        },
        "assignmentName": {
          "type": "string",
          "description": "The name of the assignment or test."
        },
        "score": {
          "type": "number",
          "description": "The score the student received."
        },
        "totalScore": {
          "type": "number",
          "description": "The total possible score for the assignment."
        },
        "timestamp": {
          "type": "string",
          "format": "date-time",
          "description": "The date the mark was recorded."
        }
      },
      "required": [
        "studentId",
        "courseId",
        "assignmentName",
        "score",
        "totalScore",
        "timestamp"
      ]
    }
  },
  "auth": {
    "providers": [
      "password",
      "anonymous"
    ]
  },
  "firestore": {
    "structure": [
      {
        "path": "/users/{userId}",
        "definition": {
          "entityName": "User",
          "schema": {
            "$ref": "#/backend/entities/User"
          },
          "description": "Stores user profiles.  Path-based ownership.",
          "params": [
            {
              "name": "userId",
              "description": "The unique identifier for the user."
            }
          ]
        }
      },
      {
        "path": "/roles/{roleId}",
        "definition": {
          "entityName": "Role",
          "schema": {
            "$ref": "#/backend/entities/Role"
          },
          "description": "Stores role definitions. Used for RBAC.",
          "params": [
            {
              "name": "roleId",
              "description": "The unique identifier for the role."
            }
          ]
        }
      },
      {
        "path": "/permissions/{permissionId}",
        "definition": {
          "entityName": "Permission",
          "schema": {
            "$ref": "#/backend/entities/Permission"
          },
          "description": "Stores permission definitions.",
          "params": [
            {
              "name": "permissionId",
              "description": "The unique identifier for the permission."
            }
          ]
        }
      },
      {
        "path": "/courses/{courseId}",
        "definition": {
          "entityName": "Course",
          "schema": {
            "$ref": "#/backend/entities/Course"
          },
          "description": "Stores course information.  `instructorId` denotes course ownership.",
          "params": [
            {
              "name": "courseId",
              "description": "The unique identifier for the course."
            }
          ]
        }
      },
      {
        "path": "/courses/{courseId}/classSessions/{classSessionId}",
        "definition": {
          "entityName": "ClassSession",
          "schema": {
            "$ref": "#/backend/entities/ClassSession"
          },
          "description": "Stores class session details, nested under courses. Includes denormalized 'courseId' for authorization independence.",
          "params": [
            {
              "name": "courseId",
              "description": "The unique identifier for the course."
            },
            {
              "name": "classSessionId",
              "description": "The unique identifier for the class session."
            }
          ]
        }
      },
      {
        "path": "/attendanceRecords/{attendanceRecordId}",
        "definition": {
          "entityName": "AttendanceRecord",
          "schema": {
            "$ref": "#/backend/entities/AttendanceRecord"
          },
          "description": "Stores attendance records for all students across all courses.",
          "params": [
            {
              "name": "attendanceRecordId",
              "description": "The unique identifier for the attendance record."
            }
          ]
        }
      },
      {
        "path": "/marks/{markId}",
        "definition": {
          "entityName": "Mark",
          "schema": {
            "$ref": "#/backend/entities/Mark"
          },
          "description": "Stores marks for students. Students can only read their own marks.",
          "params": [
            {
              "name": "markId",
              "description": "The unique identifier for the mark."
            }
          ]
        }
      }
    ]
  }
}

    